import 'package:flutter_test/flutter_test.dart';
import 'package:hnapp/jason_parsing.dart';

void main() {
  test('parses topstories.json', () {
    const jsonString =
        '[23405022,23404604,23403800,23404681,23403455,23404432,23390160,23403864,23390071,23389437,23402343,23402134,23405147,23399924,23388897,23399484,23402639,23404411,23388192,23389675,23402976,23404520,23404900,23389435,23401582,23401258,23387588,23401553,23400565,23402788,23403638,23402599,23398696,23393935,23390914,23399275,23399351,23405316,23398261,23404030,23390707,23397560,23391380,23399979,23403578,23394024,23381513,23403754,23388849,23400783,23402199,23391934,23396499,23390626,23397613,23388909,23372477,23402418,23404321,23397868,23393422,23398026,23390024,23392194,23398878,23386991,23389689,23389964,23386537,23390966,23377292,23379196,23395923,23388876,23393914,23389690,23391981,23388858,23402797,23389914,23387374,23397222,23393496,23391814,23401183,23391241,23397958,23402608,23391274,23389784,23379652,23376357,23389712,23394554,23392404,23400911,23398289,23388406,23392393,23383262,23392431,23392814,23392323,23381156,23391669,23389137,23386630,23390633,23395493,23392246,23397638,23377186,23394714,23386040,23393165,23375875,23369604,23387687,23391662,23404153,23378701,23395689,23400463,23387314,23390308,23382427,23394137,23392994,23390264,23382385,23389182,23402043,23391851,23398098,23395012,23397915,23380121,23377273,23384227,23399670,23369873,23374336,23373107,23389693,23376523,23391908,23375873,23379910,23381675,23373283,23379709,23398746,23387211,23390132,23375494,23385741,23403480,23392461,23396445,23394972,23382554,23393782,23401902,23379775,23379194,23379831,23375003,23393053,23375826,23379397,23382737,23397251,23397045,23397797,23386626,23385505,23403236,23394303,23370009,23395808,23376960,23398347,23377270,23394065,23385727,23375193,23387284,23381591,23384556,23385555,23395554,23401383,23375733,23376688,23389108,23376208,23396764,23381736,23396627,23381635,23392457,23382786,23369817,23377888,23398327,23372119,23386211,23381393,23398652,23376932,23399343,23383548,23398451,23379661,23380370,23395584,23399409,23372452,23390835,23398370,23385192,23389737,23397434,23377940,23371530,23370768,23402449,23370646,23380316,23373730,23396775,23391430,23374667,23391397,23380113,23378010,23376865,23399132,23380445,23376084,23376181,23390340,23373982,23377514,23375602,23374709,23371202,23396683,23373807,23384989,23397740,23390097,23385905,23399533,23373507,23379109,23390263,23378524,23377012,23371705,23373886,23374345,23376057,23380480,23377504,23369706,23383936,23393264,23398205,23397268,23401618,23379554,23383333,23369999,23372125,23370693,23399223,23403828,23372852,23370153,23397819,23381164,23381957,23387007,23394075,23399038,23371537,23370613,23393129,23398945,23397149,23379637,23387034,23386361,23379689,23392250,23370056,23389418,23393664,23378790,23398167,23381599,23381624,23380070,23380207,23380022,23393745,23383746,23387253,23386424,23392119,23393283,23384360,23392865,23381236,23382888,23387444,23375056,23391464,23393957,23377992,23396896,23377683,23387180,23370348,23374746,23379149,23387560,23387558,23396363,23399184,23381202,23384452,23384339,23374823,23388539,23371261,23397795,23372143,23385802,23373185,23372570,23371483,23382230,23382093,23394174,23390613,23381719,23389522,23370597,23393881,23397095,23384860,23374935,23377645,23375791,23383682,23377066,23387152,23396639,23392967,23370026,23394782,23378512,23394300,23371793,23371396,23392032,23380119,23391238,23387223,23378707,23375418,23399093,23369654,23388382,23373157,23382330,23381894,23377597,23382403,23387530,23372962,23389687,23395645,23389622,23375189,23379931,23378877,23369765,23380272,23403790,23400934,23377481,23379970,23370209,23372883,23389126,23383509,23379418,23386309,23382611,23396927,23384118,23382187,23390954,23378030,23372684,23380576,23376778,23370986,23374348,23376596,23375353,23380072,23379639,23372230,23382573,23371457,23371732,23375566,23381203,23370963,23380348,23380306,23379957,23376236,23373676,23398414,23371677,23373094,23392247,23384079,23378099,23370462,23375014,23375672,23382738,23381897,23370902,23374199,23378103,23381643,23380772,23373598,23380238,23369890,23395203,23379672,23373392,23375093,23388487,23374114,23369791,23376188,23378316,23376029,23370890,23379991,23380524,23369904,23374819,23373514,23373686,23379148,23402222,23370479,23372774,23390723,23371048,23375085,23371121,23377765,23403084,23373329,23375305,23383659,23400285,23379576,23387616,23397670,23398573,23389714,23382041,23384039,23383498,23376599,23370879,23379195,23383138,23377618,23383251,23383450,23400607,23400724,23404938,23399746,23403422,23374603,23375283]';
    expect(parseTopStories(jsonString).first, 23405022);
  });

  test('parses item.json', () {
    const jsonString =
        '''' {"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"} '''
        '';
    expect(parserArticle(jsonString).by, 'dhouston');
  });
}
